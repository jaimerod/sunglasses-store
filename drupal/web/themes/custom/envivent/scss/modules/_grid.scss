$grid-breakpoint-xsmall: 0px !default;
$grid-breakpoint-small:  540px !default;
$grid-breakpoint-medium: 720px !default;
$grid-breakpoint-large:  960px !default;
$grid-breakpoint-xlarge: 1140px !default;

$grid-gutters-xsmall: 9px !default;
$grid-gutters-small:  9px !default;
$grid-gutters-medium: 9px !default;
$grid-gutters-large:  9px !default;
$grid-gutters-xlarge: 9px !default;

$grid-columns-xsmall: 6 !default;
$grid-columns-small:  6 !default;
$grid-columns-medium: 8 !default;
$grid-columns-large:  12 !default;
$grid-columns-xlarge: 12 !default;


// Break points
@mixin breakpoint($size) {
  $breakpoint: $grid-breakpoint-xsmall;

  @if ($size == 'small') {
    $breakpoint: $grid-breakpoint-small;
  }

  @if ($size == 'medium') {
    $breakpoint: $grid-breakpoint-medium;
  }

  @if ($size == 'large') {
    $breakpoint: $grid-breakpoint-large;
  }

  @if ($size == 'xlarge') {
    $breakpoint: $grid-breakpoint-xlarge;
  }

  @media (min-width: $breakpoint) {
    @content;
  }
}

@mixin breakpoint-only($size) {
  $min: 0px;
  $max: $grid-breakpoint-small - 1;

  @if ($size == 'small') {
    $min: $grid-breakpoint-small;
    $max: $grid-breakpoint-medium - 1;
  }

  @if ($size == 'medium') {
    $min: $grid-breakpoint-medium;
    $max: $grid-breakpoint-large - 1;
  }

  @if ($size == 'large') {
    $min: $grid-breakpoint-large;
    $max: $grid-breakpoint-xlarge - 1;
  }

  @if ($size == 'xlarge') {
    $min: $grid-breakpoint-xlarge;
    $max: 99999px;
  }

  @media (min-width: $min) AND (max-width: $max) {
    @content;
  }
}

// Container
@mixin make-container() {
  width: 100%;
  max-width: $desktop-max-width;
  margin-left: auto;
  margin-right: auto;

  @include breakpoint("xsmall") {
    padding-left: $grid-gutters-xsmall;
    padding-right: $grid-gutters-xsmall;
  }

  @include breakpoint("small") {
    padding-left: $grid-gutters-small;
    padding-right: $grid-gutters-small;
  }

  @include breakpoint("medium") {
    padding-left: $grid-gutters-medium;
    padding-right: $grid-gutters-medium;
  }

  @include breakpoint("large") {
    padding-left: $grid-gutters-large;
    padding-right: $grid-gutters-large;
  }

  @include breakpoint("xlarge") {
    padding-left: $grid-gutters-xlarge;
    padding-right: $grid-gutters-xlarge;
  }
}

// Rows
@mixin make-row() {
  display: flex;
  flex-wrap: wrap;

  @include breakpoint("xsmall") {
    margin-left: -1 * $grid-gutters-xsmall;
    margin-right: -1 * $grid-gutters-xsmall;
  }

  @include breakpoint("small") {
    margin-left: -1 * $grid-gutters-small;
    margin-right: -1 * $grid-gutters-small;
  }

  @include breakpoint("medium") {
    margin-left: -1 * $grid-gutters-medium;
    margin-right: -1 * $grid-gutters-medium;
  }

  @include breakpoint("large") {
    margin-left: -1 * $grid-gutters-large;
    margin-right: -1 * $grid-gutters-large;
  }

  @include breakpoint("xlarge") {
    margin-left: -1 * $grid-gutters-xlarge;
    margin-right: -1 * $grid-gutters-xlarge;
  }
}

// Columns
@mixin make-col-helper($cols, $breakpoint, $column-width, $gutters) {
  $gutter-width:  ($cols - 1) * ($gutters * 2);
  $total-gutters: ($column-width) * ($gutters * 2);
  $percentage: $cols/$grid-columns-xlarge;

  flex-basis: 0;
  flex-grow: 1;
  max-width: 100%;

  @include breakpoint($breakpoint) {
    padding-left: $gutters;
    padding-right: $gutters;
    //width: calc(((((100% - #{$total-gutters}) / #{$column-width})) * #{$cols}) + #{$gutter-width} - 0.01px);
    $width: $percentage * 100 + "%";
    // flex: 0 1 calc(
    //   (
    //     (
    //       (
    //         (
    //           100% - #{$total-gutters}
    //         )
    //         / #{$column-width}
    //       )
    //     ) * #{$cols}
    //   ) + #{$gutter-width}
    // );

    flex: 0 0 #{$width};
    width: #{$width};

  }
}

@mixin make-col($cols)    {@include make-col-helper($cols, 'xsmall', $grid-columns-xsmall, $grid-gutters-xsmall);}
@mixin make-sm-col($cols) {@include make-col-helper($cols, 'small',  $grid-columns-small,  $grid-gutters-small);}
@mixin make-md-col($cols) {@include make-col-helper($cols, 'medium', $grid-columns-medium, $grid-gutters-medium);}
@mixin make-lg-col($cols) {@include make-col-helper($cols, 'large',  $grid-columns-large,  $grid-gutters-large);}
@mixin make-xl-col($cols) {@include make-col-helper($cols, 'xlarge', $grid-columns-xlarge, $grid-gutters-xlarge);}

// Offsets
@mixin make-offset-helper($cols, $breakpoint, $column-width, $gutters) {
  $gutter-width:  ($cols) * ($gutters * 2) + $gutters;
  $total-gutters: ($column-width) * ($gutters * 2);

  @include breakpoint($breakpoint) {
    margin-right: $gutters;
    margin-left: calc(((((100% - #{$total-gutters}) / #{$column-width})) * #{$cols}) + #{$gutter-width}) !important;
  }
}

@mixin make-offset($cols)    {@include make-offset-helper($cols, 'xsmall', $grid-columns-xsmall, $grid-gutters-xsmall);}
@mixin make-sm-offset($cols) {@include make-offset-helper($cols, 'small',  $grid-columns-small,  $grid-gutters-small);}
@mixin make-md-offset($cols) {@include make-offset-helper($cols, 'medium', $grid-columns-medium, $grid-gutters-medium);}
@mixin make-lg-offset($cols) {@include make-offset-helper($cols, 'large',  $grid-columns-large,  $grid-gutters-large);}
@mixin make-xl-offset($cols) {@include make-offset-helper($cols, 'xlarge', $grid-columns-xlarge, $grid-gutters-xlarge);}


// Pulls
@mixin pull-col($cols) {
  $gutter-width-mobile:  ($cols) * ($grid-gutters-mobile * 2) + $grid-gutters-mobile;
  $total-gutters-mobile: ($grid-columns-mobile) * ($grid-gutters-mobile * 2);

  $gutter-width-tablet:  ($cols) * ($grid-gutters-tablet * 2) + $grid-gutters-tablet;
  $total-gutters-tablet: ($grid-columns-tablet) * ($grid-gutters-tablet * 2);

  $gutter-width-desktop:  ($cols) * ($grid-gutters-desktop * 2) + $grid-gutters-desktop;
  $total-gutters-desktop: ($grid-columns-desktop) * ($grid-gutters-desktop * 2);

  transform: translateX(calc(-1 * ((((100vw - #{$total-gutters-mobile}) / #{$grid-columns-mobile})) * #{$cols}) - #{$gutter-width-mobile / 2}));

  @include breakpoint($tablet) {
    transform: translateX(calc(-1 * ((((100vw - #{$total-gutters-tablet}) / #{$grid-columns-tablet})) * #{$cols}) - #{$gutter-width-tablet / 2}));
  }

  @media (min-width: $desktop-max-width) {
    transform: translateX(calc(-1 * (1440px / #{$grid-columns-mobile}) * #{$cols}) );
  }
}

// Helper Classes
.row {
  @include make-row();
}

// xsmall
.col-1  {@include make-col(1);}
.col-2  {@include make-col(2);}
.col-3  {@include make-col(3);}
.col-4  {@include make-col(4);}
.col-5  {@include make-col(5);}
.col-6  {@include make-col(6);}
.col-7  {@include make-col(7);}
.col-8  {@include make-col(8);}
.col-9  {@include make-col(9);}
.col-10 {@include make-col(10);}
.col-11 {@include make-col(11);}
.col-12 {@include make-col(12);}
.offset-0  {@include make-offset(0);}
.offset-1  {@include make-offset(1);}
.offset-2  {@include make-offset(2);}
.offset-3  {@include make-offset(3);}
.offset-4  {@include make-offset(4);}
.offset-5  {@include make-offset(5);}
.offset-6  {@include make-offset(6);}
.offset-7  {@include make-offset(7);}
.offset-8  {@include make-offset(8);}
.offset-9  {@include make-offset(9);}
.offset-10 {@include make-offset(10);}
.offset-11 {@include make-offset(11);}

// small
.col-sm-1  {@include make-sm-col(1);}
.col-sm-2  {@include make-sm-col(2);}
.col-sm-3  {@include make-sm-col(3);}
.col-sm-4  {@include make-sm-col(4);}
.col-sm-5  {@include make-sm-col(5);}
.col-sm-6  {@include make-sm-col(6);}
.col-sm-7  {@include make-sm-col(7);}
.col-sm-8  {@include make-sm-col(8);}
.col-sm-9  {@include make-sm-col(9);}
.col-sm-10 {@include make-sm-col(10);}
.col-sm-11 {@include make-sm-col(11);}
.col-sm-12 {@include make-sm-col(12);}
.offset-sm-0  {@include make-sm-offset(0);}
.offset-sm-1  {@include make-sm-offset(1);}
.offset-sm-2  {@include make-sm-offset(2);}
.offset-sm-3  {@include make-sm-offset(3);}
.offset-sm-4  {@include make-sm-offset(4);}
.offset-sm-5  {@include make-sm-offset(5);}
.offset-sm-6  {@include make-sm-offset(6);}
.offset-sm-7  {@include make-sm-offset(7);}
.offset-sm-8  {@include make-sm-offset(8);}
.offset-sm-9  {@include make-sm-offset(9);}
.offset-sm-10 {@include make-sm-offset(10);}
.offset-sm-11 {@include make-sm-offset(11);}

// medium
.col-md-1  {@include make-md-col(1);}
.col-md-2  {@include make-md-col(2);}
.col-md-3  {@include make-md-col(3);}
.col-md-4  {@include make-md-col(4);}
.col-md-5  {@include make-md-col(5);}
.col-md-6  {@include make-md-col(6);}
.col-md-7  {@include make-md-col(7);}
.col-md-8  {@include make-md-col(8);}
.col-md-9  {@include make-md-col(9);}
.col-md-10 {@include make-md-col(10);}
.col-md-11 {@include make-md-col(11);}
.col-md-12 {@include make-md-col(12);}
.offset-md-0  {@include make-md-offset(0);}
.offset-md-1  {@include make-md-offset(1);}
.offset-md-2  {@include make-md-offset(2);}
.offset-md-3  {@include make-md-offset(3);}
.offset-md-4  {@include make-md-offset(4);}
.offset-md-5  {@include make-md-offset(5);}
.offset-md-6  {@include make-md-offset(6);}
.offset-md-7  {@include make-md-offset(7);}
.offset-md-8  {@include make-md-offset(8);}
.offset-md-9  {@include make-md-offset(9);}
.offset-md-10 {@include make-md-offset(10);}
.offset-md-11 {@include make-md-offset(11);}

// large
.col-lg-1  {@include make-lg-col(1);}
.col-lg-2  {@include make-lg-col(2);}
.col-lg-3  {@include make-lg-col(3);}
.col-lg-4  {@include make-lg-col(4);}
.col-lg-5  {@include make-lg-col(5);}
.col-lg-6  {@include make-lg-col(6);}
.col-lg-7  {@include make-lg-col(7);}
.col-lg-8  {@include make-lg-col(8);}
.col-lg-9  {@include make-lg-col(9);}
.col-lg-10 {@include make-lg-col(10);}
.col-lg-11 {@include make-lg-col(11);}
.col-lg-12 {@include make-lg-col(12);}
.offset-lg-0  {@include make-lg-offset(0);}
.offset-lg-1  {@include make-lg-offset(1);}
.offset-lg-2  {@include make-lg-offset(2);}
.offset-lg-3  {@include make-lg-offset(3);}
.offset-lg-4  {@include make-lg-offset(4);}
.offset-lg-5  {@include make-lg-offset(5);}
.offset-lg-6  {@include make-lg-offset(6);}
.offset-lg-7  {@include make-lg-offset(7);}
.offset-lg-8  {@include make-lg-offset(8);}
.offset-lg-9  {@include make-lg-offset(9);}
.offset-lg-10 {@include make-lg-offset(10);}
.offset-lg-11 {@include make-lg-offset(11);}

// xlarge
.col-xl-1  {@include make-xl-col(1);}
.col-xl-2  {@include make-xl-col(2);}
.col-xl-3  {@include make-xl-col(3);}
.col-xl-4  {@include make-xl-col(4);}
.col-xl-5  {@include make-xl-col(5);}
.col-xl-6  {@include make-xl-col(6);}
.col-xl-7  {@include make-xl-col(7);}
.col-xl-8  {@include make-xl-col(8);}
.col-xl-9  {@include make-xl-col(9);}
.col-xl-10 {@include make-xl-col(10);}
.col-xl-11 {@include make-xl-col(11);}
.col-xl-12 {@include make-xl-col(12);}
.offset-xl-0  {@include make-xl-offset(0);}
.offset-xl-1  {@include make-xl-offset(1);}
.offset-xl-2  {@include make-xl-offset(2);}
.offset-xl-3  {@include make-xl-offset(3);}
.offset-xl-4  {@include make-xl-offset(4);}
.offset-xl-5  {@include make-xl-offset(5);}
.offset-xl-6  {@include make-xl-offset(6);}
.offset-xl-7  {@include make-xl-offset(7);}
.offset-xl-8  {@include make-xl-offset(8);}
.offset-xl-9  {@include make-xl-offset(9);}
.offset-xl-10 {@include make-xl-offset(10);}
.offset-xl-11 {@include make-xl-offset(11);}
